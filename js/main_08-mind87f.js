$(document).ready(function(){function e(){galleryTL=new TimelineMax,galleryTL.fromTo(".left-side .active-slide.image-outer",1.55,{yPercent:-102,autoAlpha:1},{yPercent:0,ease:Expo.easeInOut,force3D:!0},0).fromTo(".left-side .active-slide .image-inner",1.55,{yPercent:102,autoAlpha:1},{yPercent:0,ease:Expo.easeInOut,force3D:!0},0).fromTo(".left-side .active-slide.image-outer",1.39,{webkitClipPath:"polygon("+T+")",clipPath:"polygon("+T+")"},{webkitClipPath:"polygon(0% 0%, 100% 0%, 100% 100%, 0 100%)",clipPath:"polygon(0% 0%, 100% 0%, 100% 100%, 0 100%)",ease:Sine.easeInOut,force3D:!0},0).fromTo(".right-side .active-slide.image-outer",1.39,{webkitClipPath:"polygon("+x+")",clipPath:"polygon("+x+")"},{webkitClipPath:"polygon(0% 0%, 100% 0%, 100% 100%, 0 100%)",clipPath:"polygon(0% 0%, 100% 0%, 100% 100%, 0 100%)",ease:Sine.easeInOut,force3D:!0},0).fromTo(".right-side .active-slide.image-outer",1.55,{yPercent:102,autoAlpha:1},{yPercent:0,ease:Expo.easeInOut,force3D:!0},0).fromTo(".right-side .active-slide .image-inner",1.55,{yPercent:-102,autoAlpha:1},{yPercent:0,ease:Expo.easeInOut,force3D:!0},0),g++,m++,g===h&&(g=0),m===v&&(m=0),TweenLite.delayedCall(3.5,function(){var t=document.querySelectorAll(".active-slide");if([].forEach.call(t,function(e){e.classList.remove("active-slide")}),document.querySelector(".prev-slide")){var a=document.querySelectorAll(".prev-slide");[].forEach.call(a,function(e){e.classList.remove("prev-slide")})}y[0===m?v-1:m-1].classList.add("prev-slide"),y[m].classList.add("active-slide"),w[0===g?h-1:g-1].classList.add("prev-slide"),w[g].classList.add("active-slide"),globalObject.playGallery&&e()})}function t(e){var t=null,a=!1;return e||(e=window.event),e.wheelDelta?t=e.wheelDelta/60:e.detail&&(t=-e.detail/2),null!==t&&(a=t>0?"up":"down"),a}function a(){var e=document.querySelector(".bio"),t=e.querySelector(".fake-scrollbar-height"),a=t.offsetHeight,o=e.querySelector(".hide-scrollbar-wrapper"),i=a-o.offsetHeight,n=0,l=e.querySelector(".progress-dots span:nth-child(2)");o.addEventListener("scroll",function(){TweenLite.set(l,{backgroundColor:"rgba(239,244,230,"+-1*((t.getBoundingClientRect().top-o.getBoundingClientRect().top)/i).toFixed(2)+")"})})}function o(){var e=document.querySelector(".about"),t=e.querySelector(".fake-scrollbar-height"),a=t.offsetHeight,o=e.querySelector(".hide-scrollbar-wrapper"),i=a-o.offsetHeight,n=0,l=e.querySelector(".progress-dots span:nth-child(2)");o.addEventListener("scroll",function(){TweenLite.set(l,{backgroundColor:"rgba(158,137,89,"+-1*((t.getBoundingClientRect().top-o.getBoundingClientRect().top)/i).toFixed(2)+")"})})}function i(e){$(".featured-image .outer").removeClass("prev"),$(".featured-image .outer.active").addClass("prev").removeClass("active"),$(".featured-image .outer").eq(e).addClass("active"),featImgTL=new TimelineMax,featImgTL.fromTo(".featured-image .active.outer",1.17,{webkitClipPath:"polygon("+featImgStartClip+")",clipPath:"polygon("+featImgStartClip+")"},{webkitClipPath:"polygon(0% 0%, 100% 0%, 100% 100%, 0 100%)",clipPath:"polygon(0% 0%, 100% 0%, 100% 100%, 0 100%)",ease:Sine.easeInOut,force3D:!0},0).fromTo(".featured-image .active.outer",1.3,{yPercent:yOuter,autoAlpha:1},{yPercent:0,ease:Expo.easeInOut,force3D:!0},0).fromTo(".featured-image .active .inner",1.3,{yPercent:yInner,autoAlpha:1},{yPercent:0,ease:Expo.easeInOut,force3D:!0},0)}function n(e){console.log(e),D.to(".fade",.32,{opacity:0,force3D:!0,ease:Sine.easeInOut}).add(function(){i(e)},0).add(function(){B.text(K),F.text(U),R.text(X),j.text(J),G.text(Q),H.text(V),W.length>0?(TweenLite.to(N,.3,{pointerEvents:"all",opacity:1}),N.attr("href",W)):TweenLite.to(N,.3,{pointerEvents:"none",opacity:.4}),Z.length>0?(TweenLite.to(z,.3,{pointerEvents:"all",opacity:1}),z.attr("href",Z)):TweenLite.to(z,.3,{pointerEvents:"none",opacity:.4}),A.hasClass("dinner")?Y.text("menu"):Y.text("more info")}).add("fadeBackIn").to(".events-tours .ctas",.5,{opacity:1,force3D:!0,ease:Sine.easeInOut},"fadeBackIn").staggerTo(".fade",.85,{opacity:1,force3D:!0,ease:Expo.easeInOut},staggerDur,"fadeBackIn")}function l(){TweenLite.set($(".featured-image .active, .featured-image .active .inner"),{autoAlpha:1});var e=A.data("date"),t=A.data("day"),a=A.data("time"),o=A.data("title"),i=A.data("subtitle"),n=A.data("description"),l=A.data("reservelink"),s=A.data("infolink");Y=$(".ctas a:last-child"),B=$(".event-details .date-time p"),F=$(".event-details .date-time span"),R=$(".event-details .date-time .time"),j=$(".title"),G=$(".event-details .title-description span"),H=$(".description"),N=$(".events-tours .ctas a:first-child"),z=$(".events-tours .ctas a:last-child"),B.text(e),F.text(t),R.text(a),j.text(o),G.text(i),H.text(n),l.length>0?(TweenLite.to(N,.3,{pointerEvents:"all",opacity:1}),N.attr("href",l)):TweenLite.to(N,.3,{pointerEvents:"none",opacity:.35}),s.length>0?(TweenLite.to(z,.3,{pointerEvents:"all",opacity:1}),z.attr("href",s)):TweenLite.to(z,.3,{pointerEvents:"none",opacity:.35}),A.hasClass("dinner")?Y.text("menu"):Y.text("more info")}function s(e){return/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/.test(e)}console.log("","font-size: 14px; padding: 15px 0 21px 0;"),globalObject={playGallery:!0};var r=$(".chrome-vh");isMobile&&(navigator.userAgent.indexOf("CriOS")||navigator.userAgent.indexOf("Chrome"))&&TweenLite.delayedCall(1,function(){r.each(function(e){console.log(r[e]),$(r[e]).css("height",$(r[e]).height())}),$(".main-info").css("marginTop",wh)});var c=new TimelineMax({paused:!0});c.fromTo(".reserve-overlay",.87,{scaleY:0,autoAlpha:.85},{scaleY:1,ease:Expo.easeInOut,force3D:!0}).fromTo(".reserve-modal-holder",.95,{scaleY:0,autoAlpha:1},{scaleY:1,ease:Expo.easeInOut,force3D:!0},"-=.54").fromTo(".reserve-overlay, .reserve-modal-holder",.001,{pointerEvents:"none"},{pointerEvents:"all"}).fromTo("body, html",.001,{overflow:"auto"},{overflow:"hidden"},0).fromTo(".reserve-modal-outer > div",.35,{opacity:0},{opacity:1,ease:Sine.easeInOut,force3D:!0},"-=.3"),document.querySelector(".reserve-cta").addEventListener("click",function(){c.play()}),document.querySelector(".reserve-overlay").addEventListener("click",function(){c.reverse()});var d=new TimelineMax({paused:!0}),u=new TimelineMax({paused:!0}),p=!1;d.to("#loader .bonemilk",1.1,{scaleY:1,ease:Expo.easeIn,force3D:!0}).set("#loader .green",{autoAlpha:0}).to(".loader-logo-lockup",.8,{autoAlpha:0,ease:Sine.easeInOut},.5).to("#loader",.7,{autoAlpha:0,ease:Sine.easeInOut}).to("body,html",.001,{overflowX:"hidden",overflowY:"auto",height:"auto"}).add(e).to("#gallery .svg-wrapper",.55,{delay:.4,opacity:1,ease:Sine.easeInOut,onComplete:function(){TweenLite.delayedCall(3,function(){downArrowTL=new TimelineMax({repeat:-1}),downArrowTL.to(".down-arrow img",1,{y:0}).to(".down-arrow img",.7,{y:-5})})}}),u.to("#loader .green",1,{scaleY:1.01,ease:Expo.easeInOut,force3D:!0}).fromTo("#loader .bonemilk",1.1,{scaleY:0},{scaleY:.4,ease:Expo.easeInOut,force3D:!0},"-=.74").fromTo(".loader-logo-lockup",.4,{scale:.95,yPercent:-50,xPercent:-50},{scale:1,ease:Sine.easeInOut},"-=.45").fromTo(".loader-logo-lockup",.5,{autoAlpha:0},{autoAlpha:.8,ease:Sine.easeInOut,onComplete:function(){$("#gallery").imagesLoaded(function(){TweenLite.delayedCall(1.9,function(){d.play()})})}},"-=.45").to("#loader .bonemilk",4.5,{scaleY:1,ease:Sine.easeInOut,force3D:!0}),TweenLite.delayedCall(.3,function(){u.play()});var f=$(window).width(),h=document.querySelectorAll(".left-side .slide").length,v=document.querySelectorAll(".right-side .slide").length,g=0,m=0,w=document.querySelectorAll(".left-side .slide"),y=document.querySelectorAll(".right-side .slide"),T="0 0, 100% 0, 100% 30%, 0 85%",x="0 70%, 100% 15%, 100% 100%, 0% 100%";new TimelineMax({repeat:-1}).to(".clockwise",30,{rotation:360,ease:Linear.easeNone}).to(".counter-clockwise",30,{rotation:-360,ease:Linear.easeNone},0);var L=new SplitText(".fake-placeholder",{type:"chars"}),k=L.chars,S=document.getElementById("email-cta-input");inputFocusText=new TimelineMax({paused:!0}),inputFocusText.staggerTo(k,.26,{opacity:0,ease:Sine.easeInOut},.02),S.onfocus=function(){isMobile?TweenLite.delayedCall(.2,function(){inputFocusText.timeScale(1).play()}):inputFocusText.timeScale(1).play()},S.onblur=function(){""===this.value&&inputFocusText.timeScale(1.5).reverse()},document.querySelector("footer").addEventListener("click",function(e){console.log(e.target),e.target.classList.contains("th-link")||TweenMax.to(window,1.3,{scrollTo:{y:"#loader"},ease:Power2.easeInOut,autoKill:!1})}),a(),o();for(var b=$(".event:not(.vacant), .tour:not(.vacant)"),O=$(".featured-image.place-here"),P=0;P<b.length;P++){var I=b[P].dataset.image,C=document.createElement("div"),E=document.createElement("div");C.appendChild(E),E.classList.add("inner"),C.classList.add("outer"),0===P&&C.classList.add("active"),E.style.backgroundImage="url('"+I+"')",O[0].appendChild(C)}var D=new TimelineMax,A=$(".selected-event"),q=$(".featured-image .outer.active"),M=$(".event").length-1,Y=$(".ctas a:last-child"),B=$(".event-details .date-time p"),F=$(".event-details .date-time span"),R=$(".event-details .date-time .time"),j=$(".title"),G=$(".event-details .title-description span"),H=$(".description"),N=$(".events-tours .ctas a:first-child"),z=$(".events-tours .ctas a:last-child"),K,U,X,J,Q,V,W,Z;$(".switchable").click(function(){if(!$(this).hasClass("vacant")){$(".selected-event").removeClass("selected-event"),$(this).addClass("selected-event"),A=$(".selected-event"),K=A.data("date"),U=A.data("day"),X=A.data("time"),J=A.data("title"),Q=A.data("subtitle"),V=A.data("description"),W=A.data("reservelink"),Z=A.data("infolink");var e=$(".featured-image .active").index();if($(this).hasClass("tour"))var t=$(this).index()+M;else var t=$(this).index();t>e?(yOuter=-100,yInner=100,staggerDur=.05,featImgStartClip="0 0, 100% 0, 100% 30%, 0 85%"):(yOuter=100,yInner=-100,staggerDur=-.05,featImgStartClip="0 15%, 100% 70%, 100% 100%, 0 100%"),n(t)}}),l(),$("#press-wrapper").slick({dots:!1,infinite:!1,speed:750,slidesToShow:3,cssEase:"ease-out",slidesToScroll:3,responsive:[{breakpoint:959,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:620,settings:{speed:500,slidesToShow:1,slidesToScroll:1}}]}),wh=$(window).height();var _=[];$(".floater").each(function(e){_.push($(".floater:first-child").height())}),resetPlay=!0,$(window).scroll(function(){console.log(window.pageYOffset,wh),window.pageYOffset>wh?(console.log("should pause"),resetPlay=!1,globalObject.playGallery=!1):(console.log("should play"),resetPlay||e(),resetPlay=!0,globalObject.playGallery=!0),$(".floater").each(function(e){var t=$(this).find("img"),a=$(this)[0].getBoundingClientRect(),o=a.top,i=_[e];if(o<wh+200&&o+i>-200){var n=-100*(-1.1*((o+i)/(wh+i)-1)).toFixed(2);TweenLite.to(t,.19,{yPercent:n,force3D:!0,ease:Sine.easeInOut})}})}),isMobile||($(".slick-prev, .slick-next").hover(function(){TweenLite.to($(this),.4,{scale:1.1,ease:Power2.easeOut})},function(){TweenLite.to($(this),.4,{scale:1,ease:Power2.easeOut})}),$(".slick-prev, .slick-next").mousedown(function(){TweenLite.to($(this),.25,{scale:1,ease:Power2.easeOut})}),$(".slick-prev, .slick-next").mouseup(function(){TweenLite.to($(this),.25,{scale:1.1,ease:Power2.easeOut})}),$("footer").hover(function(){TweenLite.to($(".back-up"),.4,{scale:1.02,ease:Power2.easeOut})},function(){TweenLite.to($(".back-up"),.4,{scale:1,ease:Power2.easeOut})}),$("footer").mousedown(function(){TweenLite.to($(".back-up"),.25,{scale:1,ease:Power2.easeOut})}),$("footer").mouseup(function(){TweenLite.to($(".back-up"),.25,{scale:1.02,ease:Power2.easeOut})})),$(".submit-icon").click(function(){var e=$("#email-cta-input").val(),t=$(".email-cta-wrapper").data("success");if(console.log(t),!s(e)||""===e)return void $(".output").css("color","red").text("Please enter a valid email");TweenLite.set(".output",{color:"#24272a"}),$(".output").text("Processing..."),$(".email-cta-wrapper").hide(),$.post(siteURL+"",{email:e}).done(function(e){"success"===e&&($(".email-cta-wrapper").remove(),$(".output").text(t),TweenLite.set(".output",{color:"#4ca585"}))})})});
